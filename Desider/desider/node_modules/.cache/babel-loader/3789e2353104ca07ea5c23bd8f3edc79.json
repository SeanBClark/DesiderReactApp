{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sclark/Documents/Desider/desider/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sclark/Documents/Desider/desider/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/sclark/Documents/Desider/desider/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/sclark/Documents/Desider/desider/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/sclark/Documents/Desider/desider/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/sclark/Documents/Desider/desider/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/sclark/Documents/Desider/desider/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import ReactDOM from'react-dom';import RestaurantRender from'./RestaurantRender.jsx';import'./Desktop.scss';import TailSpin from'../Style/LoadingAnimations/TailSpin.jsx';var Desktop=/*#__PURE__*/function(_Component){_inherits(Desktop,_Component);var _super=_createSuper(Desktop);function Desktop(props){var _this;_classCallCheck(this,Desktop);_this=_super.call(this,props);_this.state={GoogleAPI:'',loaded:false,data:[],placeholder:'loading',result:[]};_this.getRestaurant=_this.getRestaurant.bind(_assertThisInitialized(_this));return _this;}_createClass(Desktop,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;var proxyurl;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(this.props.location.longitude);_context.t0=this;_context.next=4;return this.props.location.latitude;case 4:_context.t1=_context.sent;_context.t2='https://maps.googleapis.com/maps/api/place/nearbysearch/json?location='+_context.t1;_context.t3=_context.t2+',';_context.next=9;return this.props.location.longitude;case 9:_context.t4=_context.sent;_context.t5=_context.t3+_context.t4;_context.t6=_context.t5+'&radius=1500&type=restaurant&key=AIzaSyDXwEL_zxvt-nIvezTRD9QKiDDOtn7nCg8';_context.t7={GoogleAPI:_context.t6};_context.t0.setState.call(_context.t0,_context.t7);proxyurl='https://cors-anywhere.herokuapp.com/';fetch(proxyurl+this.state.GoogleAPI).then(function(response){if(response.status>400){return _this2.setState(function(){return{placeholder:'Something went wrong!'};});}return response.json();}).then(function(data){_this2.setState(function(){return{data:data.results,loaded:true};});});// .catch(() => console.log('Something went wrong')); //TO DO: Error Page\ncase 16:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"getRestaurant\",value:function getRestaurant(){var choiceResult=this.state.data.sort(function(){return Math.random()-Math.random();}).find(function(){return true;});return ReactDOM.render(/*#__PURE__*/ //Terrible way to re-render component. Need to fix\nReact.createElement(RestaurantRender,{height:'800px',width:'800px',data:choiceResult,key:Math.floor(Math.random()*(100-1+1))+1}),document.getElementById('targetDOM'));}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"restaurant-div\"},this.state.loaded?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"choice-btn-div\"},/*#__PURE__*/React.createElement(\"button\",{className:\"find-rest-btn\",onClick:this.getRestaurant},\"Find Restaurant\")),/*#__PURE__*/React.createElement(\"div\",{className:\"render-div\",id:\"targetDOM\",name:\"targetDOM\"})):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(TailSpin,null)));}}]);return Desktop;}(Component);export default Desktop;","map":{"version":3,"sources":["/Users/sclark/Documents/Desider/desider/src/Restaurant/Desktop.jsx"],"names":["React","Component","ReactDOM","RestaurantRender","TailSpin","Desktop","props","state","GoogleAPI","loaded","data","placeholder","result","getRestaurant","bind","console","log","location","longitude","latitude","setState","proxyurl","fetch","then","response","status","json","results","choiceResult","sort","Math","random","find","render","floor","document","getElementById"],"mappings":"+kCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,QAAP,KAAqB,WAArB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,wBAA7B,CACA,MAAO,gBAAP,CACA,MAAOC,CAAAA,QAAP,KAAqB,yCAArB,C,GAEMC,CAAAA,O,kGAEF,iBAAYC,KAAZ,CAAmB,yCAEf,uBAAMA,KAAN,EAEA,MAAKC,KAAL,CAAa,CAETC,SAAS,CAAE,EAFF,CAGTC,MAAM,CAAE,KAHC,CAITC,IAAI,CAAE,EAJG,CAKTC,WAAW,CAAE,SALJ,CAMTC,MAAM,CAAE,EANC,CAAb,CAUA,MAAKC,aAAL,CAAqB,MAAKA,aAAL,CAAmBC,IAAnB,+BAArB,CAde,aAgBlB,C,+SAIGC,OAAO,CAACC,GAAR,CAAY,KAAKV,KAAL,CAAWW,QAAX,CAAoBC,SAAhC,E,YAEA,I,uBAGwB,MAAKZ,KAAL,CAAWW,QAAX,CAAoBE,Q,8CAD7B,wE,qCACwC,G,uBAC/B,MAAKb,KAAL,CAAWW,QAAX,CAAoBC,S,8FAC3B,0E,cAHbV,S,0BAFCY,Q,+BASCC,Q,CAAW,sC,CAEjBC,KAAK,CAACD,QAAQ,CAAG,KAAKd,KAAL,CAAWC,SAAvB,CAAL,CACKe,IADL,CACU,SAAAC,QAAQ,CAAI,CAEd,GAAIA,QAAQ,CAACC,MAAT,CAAkB,GAAtB,CAA2B,CAEvB,MAAO,CAAA,MAAI,CAACL,QAAL,CAAc,UAAM,CAEvB,MAAO,CAAET,WAAW,CAAE,uBAAf,CAAP,CAEH,CAJM,CAAP,CAMH,CACD,MAAOa,CAAAA,QAAQ,CAACE,IAAT,EAAP,CAEH,CAdL,EAeKH,IAfL,CAeU,SAAAb,IAAI,CAAI,CAEV,MAAI,CAACU,QAAL,CAAc,UAAM,CAEhB,MAAO,CAEHV,IAAI,CAAEA,IAAI,CAACiB,OAFR,CAGHlB,MAAM,CAAE,IAHL,CAAP,CAOH,CATD,EAWH,CA5BL,EA6BI;8NAIQ,CAEZ,GAAImB,CAAAA,YAAY,CAAG,KAAKrB,KAAL,CAAWG,IAAX,CAAgBmB,IAAhB,CAAqB,iBAAMC,CAAAA,IAAI,CAACC,MAAL,GAAgBD,IAAI,CAACC,MAAL,EAAtB,EAArB,EAA0DC,IAA1D,CAA+D,iBAAM,KAAN,EAA/D,CAAnB,CAEA,MAEI9B,CAAAA,QAAQ,CAAC+B,MAAT,eAEI;AACA,oBAAC,gBAAD,EAAkB,MAAM,CAAK,OAA7B,CAAuC,KAAK,CAAK,OAAjD,CAA2D,IAAI,CAAKL,YAApE,CAAmF,GAAG,CAAIE,IAAI,CAACI,KAAL,CAAWJ,IAAI,CAACC,MAAL,IAAiB,IAAM,CAAN,CAAU,CAA3B,CAAX,EAA4C,CAAtI,EAHJ,CAG+II,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAH/I,CAFJ,CAWH,C,uCAEQ,CAEL,mBAEI,2BAAK,SAAS,CAAG,gBAAjB,EAEK,KAAK7B,KAAL,CAAWE,MAAX,cAEG,4CAEI,2BAAK,SAAS,CAAG,gBAAjB,eAEI,8BAAQ,SAAS,CAAG,eAApB,CAAoC,OAAO,CAAI,KAAKI,aAApD,oBAFJ,CAFJ,cASI,2BAAK,SAAS,CAAG,YAAjB,CAA8B,EAAE,CAAG,WAAnC,CAA+C,IAAI,CAAG,WAAtD,EATJ,CAFH,cAeC,4CAAK,oBAAC,QAAD,MAAL,CAjBN,CAFJ,CAyBH,C,qBAhHiBZ,S,EAoHtB,cAAeI,CAAAA,OAAf","sourcesContent":["import React, { Component } from \"react\";\nimport ReactDOM from 'react-dom';\nimport RestaurantRender from './RestaurantRender.jsx';\nimport './Desktop.scss';\nimport TailSpin from '../Style/LoadingAnimations/TailSpin.jsx';\n\nclass Desktop extends Component {\n\n    constructor(props) {\n\n        super(props);\n\n        this.state = {\n\n            GoogleAPI: '',\n            loaded: false,\n            data: [],\n            placeholder: 'loading',\n            result: []\n\n        };\n\n        this.getRestaurant = this.getRestaurant.bind(this);\n\n    }\n\n    async componentDidMount() {\n\n        console.log(this.props.location.longitude)\n\n        this.setState({\n\n            GoogleAPI: 'https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=' \n                        + await this.props.location.latitude + ',' \n                        + await this.props.location.longitude \n                        +'&radius=1500&type=restaurant&key=AIzaSyDXwEL_zxvt-nIvezTRD9QKiDDOtn7nCg8',\n\n        });\n\n        const proxyurl = 'https://cors-anywhere.herokuapp.com/';\n\n        fetch(proxyurl + this.state.GoogleAPI)\n            .then(response => {\n\n                if (response.status > 400) {\n\n                    return this.setState(() => {\n\n                        return { placeholder: 'Something went wrong!' };\n\n                    });\n\n                }\n                return response.json();\n\n            })\n            .then(data => {\n\n                this.setState(() => {\n\n                    return {\n\n                        data: data.results,\n                        loaded: true\n\n                    };\n\n                });\n\n            })\n            // .catch(() => console.log('Something went wrong')); //TO DO: Error Page\n\n    }\n\n    getRestaurant() {\n\n        var choiceResult = this.state.data.sort(() => Math.random() - Math.random()).find(() => true);\n\n        return (\n\n            ReactDOM.render (\n\n                //Terrible way to re-render component. Need to fix\n                <RestaurantRender height = { '800px' } width = { '800px' } data = { choiceResult } key = {Math.floor(Math.random() * (100 - 1 + 1)) + 1}/>,document.getElementById('targetDOM')\n\n            )\n\n        );\n\n    }\n\n    render() {\n\n        return (\n\n            <div className = 'restaurant-div'>\n\n                {this.state.loaded ? \n                \n                    <div>\n\n                        <div className = 'choice-btn-div'>\n\n                            <button className = 'find-rest-btn' onClick = {this.getRestaurant}>Find Restaurant</button>\n                            {/* <button className = 'filter-rest-btn'>Filter Restaurant</button> */}\n\n                        </div>\n\n                        <div className = 'render-div' id = 'targetDOM' name = 'targetDOM'></div>\n\n                    </div>\n\n                : <div><TailSpin /></div>}\n\n            </div>\n\n        );   \n\n    }\n\n}\n\nexport default Desktop;"]},"metadata":{},"sourceType":"module"}